# Блог

## Сервер

## Быстрый старт

### Запуск сервера
1) Установите свои значения в конфиге **config.json**:

Поля конфига:
 - *db_user*: Имя пользователя Postgres
 - *db_password*: Пароль пользователя Postgres
 - *db_name*: Имя базы данных
 - *jwtSecretKey*: секретный ключ, который используется для создания и проверки JWT токенов
 
2) Зарегестрируйте пользователя на странице **/register**
3) Дайте данному пользователю права админа, записав его логин в список логинов админов в конфиге **admins.json**:
```
{
  "admins": [
    {
      "login": "ADMIN_USERNAME" // <- Замените на имя админа
    }
  ]
}
```
4) Запустите сервер
```
$ go build
$ ./server
```

---

### Запуск тестов
1) Установите свои значения в конфиге **testConfig.json**

Данный конфиг играет ту же роль и имеет ту же структуру, что и конфиг, использующийся для работы сервера.

Однако, так как он используется для работы тестового сервера и тестовой базы данных и тесты не должны мешать работе обычного сервера, 
следует установить такие значения, чтобы значения двух конфигов не пересекались.

2) Запустите тесты:

```
go test -v
```

---

## Передача своих конфигов

### Описание конфигов сервера
Для того, чтобы запустить сервер с своими конфигами, необходимо передать следующие аргументы в программу:
 - *--config* (shorthand: *-c*) - местоположение конфига сервера. 

**Стандартный путь:** *configs/config.json*
 - *--admins* (shorthand: *-a*) - местоположение конфига с списком админов, которые имеют такие привилегии, как создавать, 
 изменять и удалять посты.

**Стандартный путь:** *configs/admins.json*

--- 

#### Разберем каждый конфиг

1) **Config**

Данный конфиг имеет следующий вид:
```
{
  "db_user": "postgres",
  "db_password": "postgres",
  "db_name": "postgres",
  "jwtSecretKey": "superSecretKey"
}
```
Поля конфига:
 - *db_user*: Имя пользователя Postgres
 - *db_password*: Пароль пользователя Postgres
 - *db_name*: Имя базы данных
 - *jwtSecretKey*: секретный ключ, который используется для создания и проверки JWT токенов
 
2) **Admins**

Данный конфиг имеет следующий вид:
```
{
  "admins": [
    {
      "login": "admin1Login"
    },
    {
      "login": "admin2Login"
    }
  ]
}
```
Поля конфига:
 - *admins*: Список пользователей, которые имеют такие привилегии, как создавать, изменять и удалять посты.
 
### Запуск сервера с указанием собественных конфигов
```
$ go build
$ ./ server --config=/path/to/my/ServerConfig.json --admins=/path/to/my/adminsConfig.json
```

ИЛИ

```
$ go build
$ ./ server -c=/path/to/my/ServerConfig.json -a=/path/to/my/adminsConfig.json
```